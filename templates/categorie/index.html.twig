{% extends 'base.html.twig' %}

{% block title %}Forum Homepage - Dog Project{% endblock %}

{% block meta_description %}
<meta name="description" content="Welcome to the Dog Project Forum, a community for all dog lovers to discuss anything related to man's best friend">
<meta name="keywords" content="dog project, dog, dog trainers near me, local dog trainers, dog walks near me, dog owners community, forum">
{% endblock %}

{% block body %}


<div class='category-head'>

    <h1>WELCOME TO THE FORUM</h1>
    <p>Welcome, if you cannot find what you are looking for, make your own topic!</p>

</div>

<main class="category-main">
<div class='category-left'>

    <h2>CATEGORIES</h2>

    {% for categorie in categories %}
        {% if (categorie.nom != 'Walks') and (categorie.nom != 'Sessions') %}
            <a href="{{ path('show_categorie', {'id': categorie.id}) }}">{{ categorie }}</a>
        {% endif %}
    {% endfor %}


</div>

<div class="category-right">
    <h2 style="text-align: center;">LATEST TOPICS</h2>

    {% for topic in latestTopics %}
        <div class="topic">

            <div class="topic-date">
                {{topic.dateCreation | date('d-m-Y H:i:s')}}
                          in "{{topic.categorie}}" category
                <a href="{{ path('show_topic', {'id': topic.id}) }}">go to topic >></a>
            </div>

            <div class="topic-body">
                {% if topic.auteur is empty %}
                    <div class="topic-user">
                        <img class="topic-picture" src="{{ asset('/images/users/profile_picture_default.jpg') }}" alt="picture of a dog, default picture for deleted users">
                        {{ 'deleted' }}
                    </div>    
                {% else %}
                    <div class="topic-user">
                        <a href="{{ path('show_personne', {'id': topic.auteur.id}) }}">
                            <img class="topic-picture" src="{{ asset('/images/users/' ~ topic.auteur.nomImageProfil) }}" alt="{{ topic.auteur ~ "'s profile picture" }}">
                        </a>
                        <a href="{{ path('show_personne', {'id': topic.auteur.id}) }}">
                            {{topic.auteur}}
                        </a>
                    </div>
                {% endif %}

                <div class="topic-content">
                    <p>{{topic}}</p>
                </div>

                <div class="topic-nb-posts" >
                    <p>{{ nbPostsParTopic[topic.id] }} posts</p>
                </div>

            </div>
        </div>
    {% endfor %}

</div>
</main>
{% endblock %}
